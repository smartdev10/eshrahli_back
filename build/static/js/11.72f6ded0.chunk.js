(this.webpackJsonpchrahlifront=this.webpackJsonpchrahlifront||[]).push([[11],{701:function(e,t,a){"use strict";a.r(t);var n=a(89),o=a.n(n),r=a(121),l=a(122),c=a(465),s=a(466),i=a(468),u=a(467),g=a(0),d=a.n(g),m=a(247),p=a(78),f=a(111),h=a(69),E=a(447),b=a(445),v=a(700),S=a(508),C=a(695),x=a(22),P=a(449),w=a(451),y=a(455),O=a(441),j=a(518),N=a(486),k=a(545),T=a.n(k),M=(a(507),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={name:"",slug:"",editorState:""},e.onEditorStateChange=function(t){e.setState({editorState:t})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.onAddPage,n=t.onToggleModal,o=t.open,r=this.state,l=r.name,c=r.editorState,s=r.slug;return d.a.createElement(P.a,{width:"80%",okText:d.a.createElement(y.a,null),cancelText:d.a.createElement(x.a,{id:"modal.cancelSave"}),title:d.a.createElement(x.a,{id:"page.addPage"}),toggle:n,visible:o,closable:!1,onOk:function(){""!==l&&(n("addPageState"),a({name:l,slug:s,content:T()(Object(N.convertToRaw)(c.getCurrentContent()))}),e.setState({name:"",slug:""}))},onCancel:function(){n("addPageState"),e.setState({name:"",slug:""})}},d.a.createElement("div",{className:"gx-modal-box-row"},d.a.createElement("div",{className:"gx-modal-box-form-item"},d.a.createElement("div",{className:"gx-form-group"},d.a.createElement(O.a,{id:"columns.name",defaultMessage:"name"},(function(t){return d.a.createElement(w.a,{required:!0,value:l,placeholder:t,onChange:function(t){return e.setState({name:t.target.value})},margin:"none"})}))),d.a.createElement("div",{className:"gx-form-group"},d.a.createElement(w.a,{required:!0,value:s,placeholder:"slug",onChange:function(t){return e.setState({slug:t.target.value})},margin:"none"})),d.a.createElement("div",{className:"gx-form-group"},d.a.createElement(j.Editor,{textAlignment:"right",toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:this.onEditorStateChange})))))}}]),a}(d.a.Component)),R=a(61),K=a(691),A=a.n(K),q=function(e){var t=e.onSavePage,a=e.onToggleModal,n=e.open,o=e.id,r=e.name,l=e.content,c=e.page,s=e.count,i=Object(g.useState)(null),u=Object(R.a)(i,2),m=u[0],p=u[1],f=Object(g.useState)(null),h=Object(R.a)(f,2),E=h[0],b=h[1],v=Object(g.useState)(""),S=Object(R.a)(v,2),C=S[0],k=S[1];return Object(g.useEffect)((function(){if(l){var e=A()(l),t=e.contentBlocks,a=e.entityMap,n=N.ContentState.createFromBlockArray(t,a),o=N.EditorState.createWithContent(n);p(o),b(n),k(r)}}),[l,r,c,s]),d.a.createElement(P.a,{width:"80%",okText:d.a.createElement(y.a,null),cancelText:d.a.createElement(x.a,{id:"modal.cancelSave"}),title:d.a.createElement(x.a,{id:"page.savePage"}),toggle:a,visible:n,closable:!1,onOk:function(){if(console.log(o),""!==C){a("editPageState");var e=l;m&&(e=T()(Object(N.convertToRaw)(m.getCurrentContent()))),t({id:o,name:C,content:e}),k(r),b(null),p(null)}},onCancel:function(){a("editPageState"),k(r),b(null),p(null)}},d.a.createElement("div",{className:"gx-modal-box-row"},d.a.createElement("div",{className:"gx-modal-box-form-item"},d.a.createElement("div",{className:"gx-form-group"},d.a.createElement(O.a,{id:"columns.name",defaultMessage:"name"},(function(e){return d.a.createElement(w.a,{required:!0,placeholder:e,onChange:function(e){return k(e.target.value)},value:C,margin:"none"})}))),d.a.createElement("div",{className:"gx-form-group"},d.a.createElement(j.Editor,{editorState:m,contentState:E,textAlignment:"right",toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:function(e){p(e)}})))))},D=a(549),I=a(551),V=a(509),z=a(209),B=a(15),J=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={selectedRowKeys:[],loading:!1,page:{},id:"",name:"",count:0,content:"",addPageState:!1,editPageState:!1,visible:!1},e.onToggleModal=function(t){e.setState((function(e){return Object(l.a)({},t,!e[t])}))},e.onEditPage=function(t){e.setState({id:t.id,name:t.name,content:t.content,page:t,count:e.state.count+1},(function(){e.onToggleModal("editPageState")}))},e.onAddPage=function(){var t=Object(r.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.CreatePage({data:a});case 2:return m.b.success("\u062a\u0645\u062a \u0627\u0644\u0639\u0645\u0644\u064a\u0629 \u0628\u0646\u062c\u0627\u062d"),t.next=5,e.props.fetchPages();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSavePage=function(){var t=Object(r.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a),t.next=3,e.props.UpdatePage({data:a});case 3:return m.b.success("\u062a\u0645\u062a \u0627\u0644\u0639\u0645\u0644\u064a\u0629 \u0628\u0646\u062c\u0627\u062d"),t.next=6,e.props.fetchPages();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSelectChange=function(t){console.log("selectedRowKeys changed: ",t),e.setState({selectedRowKeys:t})},e.confirm=function(t){e.setState({loading:!0}),e.props.DeletePages({ids:t}).then(Object(r.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.fetchPages();case 2:m.b.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0635\u0641\u062d\u0629"),e.setState({loading:!1,selectedRowKeys:[]});case 4:case"end":return t.stop()}}),t)})))).catch((function(){m.b.error("\u0639\u0637\u0644 \u0623\u062b\u0646\u0627\u0621 \u0627\u0644\u0639\u0645\u0644\u064a\u0629"),e.setState({loading:!1,selectedRowKeys:[]})}))},e.handleVisibleChange=function(t){e.state.selectedRowKeys.length>0&&e.setState({visible:t})},e.cancel=function(t){e.setState({selectedRowKeys:[]})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchPages()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.selectedRowKeys,o=t.name,r=t.content,l=t.id,c=t.page,s=t.visible,i=t.count,u={selectedRowKeys:n,onChange:this.onSelectChange},g=n.length>0,m=[{title:d.a.createElement(x.a,{id:"columns.name"}),dataIndex:"name",align:"right"},{title:"slug",dataIndex:"slug",align:"right"},{title:d.a.createElement(x.a,{id:"columns.operation"}),dataIndex:"",key:"x",render:function(t){return d.a.createElement("span",null,d.a.createElement(p.a,{onClick:function(){return e.onEditPage(t)},type:"primary",icon:d.a.createElement(D.a,null)}," \u062a\u0639\u062f\u064a\u0644 "))},align:"right"}];return d.a.createElement(f.a,null,d.a.createElement(h.a,{span:24},d.a.createElement(E.a,{title:d.a.createElement("h1",null,d.a.createElement(x.a,{id:"sidebar.Pages"}))},d.a.createElement(p.a,{onClick:function(){return e.onToggleModal("addPageState")},size:"large",icon:d.a.createElement(I.a,null),type:"primary"}),d.a.createElement(b.a,{type:"vertical"}),d.a.createElement(v.a,{count:this.state.selectedRowKeys.length},d.a.createElement(S.a,{visible:s,onVisibleChange:this.handleVisibleChange,title:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u061f",onConfirm:function(){return e.confirm(n)},onCancel:this.cancel,okText:"\u0646\u0639\u0645",cancelText:"\u0644\u0627"},d.a.createElement(p.a,{size:"large",icon:d.a.createElement(V.a,null),disabled:!g,type:"danger",loading:a}))),d.a.createElement(M,{open:this.state.addPageState,onAddPage:this.onAddPage,onToggleModal:this.onToggleModal}),d.a.createElement(q,{count:i,open:this.state.editPageState,page:c,id:l,name:o,content:r,onSavePage:this.onSavePage,onToggleModal:this.onToggleModal}),d.a.createElement(C.a,{locale:{emptyText:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0623\u064a \u0628\u064a\u0627\u0646\u0627\u062a"},rowKey:function(e){return e.id},dir:"rtl",bordered:!0,className:"gx-table-responsive",rowSelection:u,columns:m,dataSource:this.props.pages}))))}}]),a}(d.a.Component);t.default=Object(B.c)((function(e){return{pages:e.pages}}),{fetchPages:z.d,CreatePage:z.a,UpdatePage:z.c,DeletePages:z.b})(J)}}]);
//# sourceMappingURL=11.72f6ded0.chunk.js.map