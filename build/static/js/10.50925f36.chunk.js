(this.webpackJsonpchrahlifront=this.webpackJsonpchrahlifront||[]).push([[10],{697:function(e,t,a){"use strict";a.r(t);var n=a(89),r=a.n(n),o=a(121),l=a(122),c=a(463),s=a(464),i=a(466),u=a(465),g=a(0),d=a.n(g),m=a(246),p=a(78),f=a(110),h=a(69),E=a(446),b=a(444),v=a(696),S=a(543),C=a(691),x=a(22),y=a(448),P=a(450),w=a(454),O=a(440),j=a(513),N=a(483),k=a(540),T=a.n(k),M=(a(505),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={name:"",slug:"",editorState:""},e.onEditorStateChange=function(t){e.setState({editorState:t})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.onAddPage,n=t.onToggleModal,r=t.open,o=this.state,l=o.name,c=o.editorState,s=o.slug;return d.a.createElement(y.a,{width:"80%",okText:d.a.createElement(w.a,null),cancelText:d.a.createElement(x.a,{id:"modal.cancelSave"}),title:d.a.createElement(x.a,{id:"page.addPage"}),toggle:n,visible:r,closable:!1,onOk:function(){""!==l&&(n("addPageState"),a({name:l,slug:s,content:T()(Object(N.convertToRaw)(c.getCurrentContent()))}),e.setState({name:"",slug:""}))},onCancel:function(){n("addPageState"),e.setState({name:"",slug:""})}},d.a.createElement("div",{className:"gx-modal-box-row"},d.a.createElement("div",{className:"gx-modal-box-form-item"},d.a.createElement("div",{className:"gx-form-group"},d.a.createElement(O.a,{id:"columns.name",defaultMessage:"name"},(function(t){return d.a.createElement(P.a,{required:!0,value:l,placeholder:t,onChange:function(t){return e.setState({name:t.target.value})},margin:"none"})}))),d.a.createElement("div",{className:"gx-form-group"},d.a.createElement(P.a,{required:!0,value:s,placeholder:"slug",onChange:function(t){return e.setState({slug:t.target.value})},margin:"none"})),d.a.createElement("div",{className:"gx-form-group"},d.a.createElement(j.Editor,{textAlignment:"right",toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:this.onEditorStateChange})))))}}]),a}(d.a.Component)),R=a(52),K=a(684),A=a.n(K),q=d.a.memo((function(e){var t,a,n=e.onSavePage,r=e.onToggleModal,o=e.open,l=e.page,c=Object(g.useState)(""),s=Object(R.a)(c,2),i=s[0],u=s[1],m=Object(g.useState)(null),p=Object(R.a)(m,2),f=p[0],h=p[1],E=Object(g.useState)(null),b=Object(R.a)(E,2),v=b[0],S=b[1];if(v){var C=A()(v),k=C.contentBlocks,M=C.entityMap;t=N.ContentState.createFromBlockArray(k,M),a=N.EditorState.createWithContent(t)}return Object(g.useEffect)((function(){0!==Object.keys(l).length&&(u(l.name),S(l.content))}),[l]),d.a.createElement(y.a,{width:"80%",okText:d.a.createElement(w.a,null),cancelText:d.a.createElement(x.a,{id:"modal.cancelSave"}),title:d.a.createElement(x.a,{id:"city.saveCity"}),toggle:r,visible:o,closable:!1,onOk:function(){if(""!==i&&""!==v){r("editPageState");var e=v;f&&(e=T()(Object(N.convertToRaw)(f.getCurrentContent()))),n({id:l.id,name:i,content:e}),u(i),S(null)}},onCancel:function(){r("editPageState"),u(l.name),S(null)}},d.a.createElement("div",{className:"gx-modal-box-row"},d.a.createElement("div",{className:"gx-modal-box-form-item"},d.a.createElement("div",{className:"gx-form-group"},d.a.createElement(O.a,{id:"columns.name",defaultMessage:"name"},(function(e){return d.a.createElement(P.a,{required:!0,placeholder:e,onChange:function(e){return u(e.target.value)},value:i,margin:"none"})}))),d.a.createElement("div",{className:"gx-form-group"},d.a.createElement(j.Editor,{defaultEditorState:a,textAlignment:"right",toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:function(e){h(e)}})))))})),D=a(544),I=a(688),V=a(704),z=a(209),B=a(15),J=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={selectedRowKeys:[],loading:!1,page:{name:""},addPageState:!1,editPageState:!1,visible:!1},e.onToggleModal=function(t){e.setState((function(e){return Object(l.a)({},t,!e[t])}))},e.onEditPage=function(t){e.setState({page:t},(function(){e.onToggleModal("editPageState")}))},e.onAddPage=function(){var t=Object(o.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.CreatePage({data:a});case 2:return m.b.success("\u062a\u0645\u062a \u0627\u0644\u0639\u0645\u0644\u064a\u0629 \u0628\u0646\u062c\u0627\u062d"),t.next=5,e.props.fetchPages();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSavePage=function(){var t=Object(o.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a),t.next=3,e.props.UpdatePage({data:a});case 3:return m.b.success("\u062a\u0645\u062a \u0627\u0644\u0639\u0645\u0644\u064a\u0629 \u0628\u0646\u062c\u0627\u062d"),t.next=6,e.props.fetchPages();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSelectChange=function(t){console.log("selectedRowKeys changed: ",t),e.setState({selectedRowKeys:t})},e.confirm=function(t){e.setState({loading:!0}),e.props.DeletePages({ids:t}).then(Object(o.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.fetchPages();case 2:m.b.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0635\u0641\u062d\u0629"),e.setState({loading:!1,selectedRowKeys:[]});case 4:case"end":return t.stop()}}),t)})))).catch((function(){m.b.error("\u0639\u0637\u0644 \u0623\u062b\u0646\u0627\u0621 \u0627\u0644\u0639\u0645\u0644\u064a\u0629"),e.setState({loading:!1,selectedRowKeys:[]})}))},e.handleVisibleChange=function(t){e.state.selectedRowKeys.length>0&&e.setState({visible:t})},e.cancel=function(t){e.setState({selectedRowKeys:[]})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchPages()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.selectedRowKeys,r=t.page,o=t.visible,l={selectedRowKeys:n,onChange:this.onSelectChange},c=n.length>0,s=[{title:d.a.createElement(x.a,{id:"columns.name"}),dataIndex:"name",align:"right"},{title:"slug",dataIndex:"slug",align:"right"},{title:d.a.createElement(x.a,{id:"columns.operation"}),dataIndex:"",key:"x",render:function(t){return d.a.createElement("span",null,d.a.createElement(p.a,{onClick:function(){return e.onEditPage(t)},type:"primary",icon:d.a.createElement(D.a,null)}," \u062a\u0639\u062f\u064a\u0644 "))},align:"right"}];return d.a.createElement(f.a,null,d.a.createElement(h.a,{span:24},d.a.createElement(E.a,{title:d.a.createElement("h1",null,d.a.createElement(x.a,{id:"sidebar.Pages"}))},d.a.createElement(p.a,{onClick:function(){return e.onToggleModal("addPageState")},size:"large",icon:d.a.createElement(I.a,null),type:"primary"}),d.a.createElement(b.a,{type:"vertical"}),d.a.createElement(v.a,{count:this.state.selectedRowKeys.length},d.a.createElement(S.a,{visible:o,onVisibleChange:this.handleVisibleChange,title:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u061f",onConfirm:function(){return e.confirm(n)},onCancel:this.cancel,okText:"\u0646\u0639\u0645",cancelText:"\u0644\u0627"},d.a.createElement(p.a,{size:"large",icon:d.a.createElement(V.a,null),disabled:!c,type:"danger",loading:a}))),d.a.createElement(M,{open:this.state.addPageState,onAddPage:this.onAddPage,onToggleModal:this.onToggleModal}),d.a.createElement(q,{open:this.state.editPageState,page:r,onSavePage:this.onSavePage,onToggleModal:this.onToggleModal}),d.a.createElement(C.a,{locale:{emptyText:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0623\u064a \u0628\u064a\u0627\u0646\u0627\u062a"},rowKey:function(e){return e.id},dir:"rtl",bordered:!0,className:"gx-table-responsive",rowSelection:l,columns:s,dataSource:this.props.pages}))))}}]),a}(d.a.Component);t.default=Object(B.c)((function(e){return{pages:e.pages}}),{fetchPages:z.d,CreatePage:z.a,UpdatePage:z.c,DeletePages:z.b})(J)}}]);
//# sourceMappingURL=10.50925f36.chunk.js.map