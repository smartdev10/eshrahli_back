(this.webpackJsonpchrahlifront=this.webpackJsonpchrahlifront||[]).push([[10],{689:function(e,t,a){"use strict";a.r(t);var n=a(137),r=a.n(n),o=a(160),l=a(109),c=a(452),i=a(453),s=a(455),d=a(454),u=a(0),g=a.n(u),m=a(238),p=a(138),f=a(97),h=a(62),E=a(439),b=a(500),v=a(688),S=a(690),C=a(682),P=a(16),w=a(686),x=a(442),y=a(535),O=a(433),j=a(504),N=a(472),k=a(531),T=a.n(k),M=(a(494),function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={name:"",editorState:""},e.onEditorStateChange=function(t){e.setState({editorState:t})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.onAddPage,n=t.onToggleModal,r=t.open,o=this.state,l=o.name,c=o.editorState;return g.a.createElement(w.a,{width:"80%",okText:g.a.createElement(y.a,null),cancelText:g.a.createElement(P.a,{id:"modal.cancelSave"}),title:g.a.createElement(P.a,{id:"page.addPage"}),toggle:n,visible:r,closable:!1,onOk:function(){""!==l&&(n("addPageState"),a({name:l,content:T()(Object(N.convertToRaw)(c.getCurrentContent()))}),e.setState({name:""}))},onCancel:function(){n("addPageState"),e.setState({name:""})}},g.a.createElement("div",{className:"gx-modal-box-row"},g.a.createElement("div",{className:"gx-modal-box-form-item"},g.a.createElement("div",{className:"gx-form-group"},g.a.createElement(O.a,{id:"columns.name",defaultMessage:"name"},(function(t){return g.a.createElement(x.a,{required:!0,value:l,placeholder:t,onChange:function(t){return e.setState({name:t.target.value})},margin:"none"})}))),g.a.createElement("div",{className:"gx-form-group"},g.a.createElement(j.Editor,{textAlignment:"right",toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:this.onEditorStateChange})))))}}]),a}(g.a.Component)),R=a(108),K=a(675),A=a.n(K),D=g.a.memo((function(e){var t,a,n=e.onSavePage,r=e.onToggleModal,o=e.open,l=e.page,c=Object(u.useState)(""),i=Object(R.a)(c,2),s=i[0],d=i[1],m=Object(u.useState)(null),p=Object(R.a)(m,2),f=p[0],h=p[1],E=Object(u.useState)(null),b=Object(R.a)(E,2),v=b[0],S=b[1];if(v){var C=A()(v),k=C.contentBlocks,M=C.entityMap;t=N.ContentState.createFromBlockArray(k,M),a=N.EditorState.createWithContent(t)}return Object(u.useEffect)((function(){0!==Object.keys(l).length&&(d(l.name),S(l.content))}),[l]),g.a.createElement(w.a,{width:"80%",okText:g.a.createElement(y.a,null),cancelText:g.a.createElement(P.a,{id:"modal.cancelSave"}),title:g.a.createElement(P.a,{id:"city.saveCity"}),toggle:r,visible:o,closable:!1,onOk:function(){if(""!==s&&""!==v){r("editPageState");var e=v;f&&(e=T()(Object(N.convertToRaw)(f.getCurrentContent()))),n({id:l.id,name:s,content:e}),d(s),S(null)}},onCancel:function(){r("editPageState"),d(l.name),S(null)}},g.a.createElement("div",{className:"gx-modal-box-row"},g.a.createElement("div",{className:"gx-modal-box-form-item"},g.a.createElement("div",{className:"gx-form-group"},g.a.createElement(O.a,{id:"columns.name",defaultMessage:"name"},(function(e){return g.a.createElement(x.a,{required:!0,placeholder:e,onChange:function(e){return d(e.target.value)},value:s,margin:"none"})}))),g.a.createElement("div",{className:"gx-form-group"},g.a.createElement(j.Editor,{defaultEditorState:a,textAlignment:"right",toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:function(e){h(e)}})))))})),V=a(495),q=a(536),z=a(695),B=a(199),I=a(9),J=function(e){Object(s.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={selectedRowKeys:[],loading:!1,page:{name:""},addPageState:!1,editPageState:!1,visible:!1},e.onToggleModal=function(t){e.setState((function(e){return Object(l.a)({},t,!e[t])}))},e.onEditPage=function(t){e.setState({page:t},(function(){e.onToggleModal("editPageState")}))},e.onAddPage=function(){var t=Object(o.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.CreatePage({data:a});case 2:return t.next=4,e.props.fetchPages();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSavePage=function(){var t=Object(o.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a),t.next=3,e.props.UpdatePage({data:a});case 3:return t.next=5,e.props.fetchPages();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSelectChange=function(t){console.log("selectedRowKeys changed: ",t),e.setState({selectedRowKeys:t})},e.confirm=function(t){e.setState({loading:!0}),e.props.DeletePages({ids:t}).then(Object(o.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.fetchPages();case 2:m.b.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0635\u0641\u062d\u0629"),e.setState({loading:!1,selectedRowKeys:[]});case 4:case"end":return t.stop()}}),t)})))).catch((function(){m.b.error("\u0639\u0637\u0644 \u0623\u062b\u0646\u0627\u0621 \u0627\u0644\u0639\u0645\u0644\u064a\u0629"),e.setState({loading:!1,selectedRowKeys:[]})}))},e.handleVisibleChange=function(t){e.state.selectedRowKeys.length>0&&e.setState({visible:t})},e.cancel=function(t){e.setState({selectedRowKeys:[]})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchPages()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.selectedRowKeys,r=t.page,o=t.visible,l={selectedRowKeys:n,onChange:this.onSelectChange},c=n.length>0,i=[{title:g.a.createElement(P.a,{id:"columns.name"}),dataIndex:"name",align:"right"},{title:g.a.createElement(P.a,{id:"columns.operation"}),dataIndex:"",key:"x",render:function(t){return g.a.createElement("span",null,g.a.createElement(p.a,{onClick:function(){return e.onEditPage(t)},type:"primary",icon:g.a.createElement(V.a,null)}," \u062a\u0639\u062f\u064a\u0644 "))},align:"right"}];return g.a.createElement(f.a,null,g.a.createElement(h.a,{span:24},g.a.createElement(E.a,{title:g.a.createElement("h1",null,g.a.createElement(P.a,{id:"sidebar.Pages"}))},g.a.createElement(p.a,{onClick:function(){return e.onToggleModal("addPageState")},size:"large",icon:g.a.createElement(q.a,null),type:"primary"}),g.a.createElement(b.a,{type:"vertical"}),g.a.createElement(v.a,{count:this.state.selectedRowKeys.length},g.a.createElement(S.a,{visible:o,onVisibleChange:this.handleVisibleChange,title:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u061f",onConfirm:function(){return e.confirm(n)},onCancel:this.cancel,okText:"\u0646\u0639\u0645",cancelText:"\u0644\u0627"},g.a.createElement(p.a,{size:"large",icon:g.a.createElement(z.a,null),disabled:!c,type:"danger",loading:a}))),g.a.createElement(M,{open:this.state.addPageState,onAddPage:this.onAddPage,onToggleModal:this.onToggleModal}),g.a.createElement(D,{open:this.state.editPageState,page:r,onSavePage:this.onSavePage,onToggleModal:this.onToggleModal}),g.a.createElement(C.a,{rowKey:function(e){return e.id},dir:"rtl",bordered:!0,className:"gx-table-responsive",rowSelection:l,columns:i,dataSource:this.props.pages}))))}}]),a}(g.a.Component);t.default=Object(I.c)((function(e){return{pages:e.pages}}),{fetchPages:B.d,CreatePage:B.a,UpdatePage:B.c,DeletePages:B.b})(J)}}]);
//# sourceMappingURL=10.a0a39cf6.chunk.js.map