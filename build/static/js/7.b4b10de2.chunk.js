(this.webpackJsonpchrahlifront=this.webpackJsonpchrahlifront||[]).push([[7],{887:function(e,t,a){"use strict";a.r(t);var n=a(173),r=a.n(n),o=a(220),c=a(137),l=a(679),i=a(680),s=a(682),u=a(681),d=a(0),g=a.n(d),m=a(334),p=a(174),f=a(122),h=a(70),E=a(666),b=a(879),v=a(886),S=a(888),C=a(881),y=a(22),P=a(884),w=a(669),x=a(889),O=a(659),j=a(726),N=a(699),T=a(753),k=a.n(T),M=(a(721),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={name:"",editorState:""},e.onEditorStateChange=function(t){e.setState({editorState:t})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.onAddPage,n=t.onToggleModal,r=t.open,o=this.state,c=o.name,l=o.editorState;return g.a.createElement(P.a,{width:"80%",okText:g.a.createElement(x.a,null),cancelText:g.a.createElement(y.a,{id:"modal.cancelSave"}),title:g.a.createElement(y.a,{id:"page.addPage"}),toggle:n,visible:r,closable:!1,onOk:function(){""!==c&&(n("addPageState"),a({name:c,content:k()(Object(N.convertToRaw)(l.getCurrentContent()))}),e.setState({name:""}))},onCancel:function(){n("addPageState"),e.setState({name:""})}},g.a.createElement("div",{className:"gx-modal-box-row"},g.a.createElement("div",{className:"gx-modal-box-form-item"},g.a.createElement("div",{className:"gx-form-group"},g.a.createElement(O.a,{id:"columns.name",defaultMessage:"name"},(function(t){return g.a.createElement(w.a,{required:!0,value:c,placeholder:t,onChange:function(t){return e.setState({name:t.target.value})},margin:"none"})}))),g.a.createElement("div",{className:"gx-form-group"},g.a.createElement(j.Editor,{textAlignment:"right",toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:this.onEditorStateChange})))))}}]),a}(g.a.Component)),A=a(221),R=a(875),K=a.n(R),D=g.a.memo((function(e){var t,a,n=e.onSavePage,r=e.onToggleModal,o=e.open,c=e.page,l=Object(d.useState)(""),i=Object(A.a)(l,2),s=i[0],u=i[1],m=Object(d.useState)(null),p=Object(A.a)(m,2),f=p[0],h=p[1],E=Object(d.useState)(null),b=Object(A.a)(E,2),v=b[0],S=b[1];if(v){var C=K()(v),T=C.contentBlocks,M=C.entityMap;t=N.ContentState.createFromBlockArray(T,M),a=N.EditorState.createWithContent(t)}return Object(d.useEffect)((function(){0!==Object.keys(c).length&&(u(c.name),S(c.content))}),[c]),g.a.createElement(P.a,{width:"80%",okText:g.a.createElement(x.a,null),cancelText:g.a.createElement(y.a,{id:"modal.cancelSave"}),title:g.a.createElement(y.a,{id:"city.saveCity"}),toggle:r,visible:o,closable:!1,onOk:function(){if(""!==s&&""!==v){r("editPageState");var e=v;f&&(e=k()(Object(N.convertToRaw)(f.getCurrentContent()))),n({id:c.id,name:s,content:e}),u(s),S(null)}},onCancel:function(){r("editPageState"),u(c.name),S(null)}},g.a.createElement("div",{className:"gx-modal-box-row"},g.a.createElement("div",{className:"gx-modal-box-form-item"},g.a.createElement("div",{className:"gx-form-group"},g.a.createElement(O.a,{id:"columns.name",defaultMessage:"name"},(function(e){return g.a.createElement(w.a,{required:!0,placeholder:e,onChange:function(e){return u(e.target.value)},value:s,margin:"none"})}))),g.a.createElement("div",{className:"gx-form-group"},g.a.createElement(j.Editor,{defaultEditorState:a,textAlignment:"right",toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:function(e){h(e)}})))))})),I=a(890),U=a(891),V=a(892),q=a(87),z=a(9),B=function(e){return{type:z.k,pages:e}},J=a(40),L=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={selectedRowKeys:[],loading:!1,page:{name:""},addPageState:!1,editPageState:!1,visible:!1},e.onToggleModal=function(t){e.setState((function(e){return Object(c.a)({},t,!e[t])}))},e.onEditPage=function(t){e.setState({page:t},(function(){e.onToggleModal("editPageState")}))},e.onAddPage=function(){var t=Object(o.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.CreatePage({data:a});case 2:return t.next=4,e.props.fetchPages();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSavePage=function(){var t=Object(o.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a),t.next=3,e.props.UpdatePage({data:a});case 3:return t.next=5,e.props.fetchPages();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSelectChange=function(t){console.log("selectedRowKeys changed: ",t),e.setState({selectedRowKeys:t})},e.confirm=function(t){e.setState({loading:!0}),e.props.DeletePages({ids:t}).then(Object(o.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.fetchPages();case 2:m.b.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0635\u0641\u062d\u0629"),e.setState({loading:!1,selectedRowKeys:[]});case 4:case"end":return t.stop()}}),t)})))).catch((function(){m.b.error("\u0639\u0637\u0644 \u0623\u062b\u0646\u0627\u0621 \u0627\u0644\u0639\u0645\u0644\u064a\u0629"),e.setState({loading:!1,selectedRowKeys:[]})}))},e.handleVisibleChange=function(t){e.state.selectedRowKeys.length>0&&e.setState({visible:t})},e.cancel=function(t){e.setState({selectedRowKeys:[]})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchPages()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.selectedRowKeys,r=t.page,o=t.visible,c={selectedRowKeys:n,onChange:this.onSelectChange},l=n.length>0,i=[{title:g.a.createElement(y.a,{id:"columns.name"}),dataIndex:"name",align:"right"},{title:g.a.createElement(y.a,{id:"columns.operation"}),dataIndex:"",key:"x",render:function(t){return g.a.createElement("span",null,g.a.createElement(p.a,{onClick:function(){return e.onEditPage(t)},type:"primary",icon:g.a.createElement(I.a,null)}," \u062a\u0639\u062f\u064a\u0644 "))},align:"right"}];return g.a.createElement(f.a,null,g.a.createElement(h.a,{span:24},g.a.createElement(E.a,{title:g.a.createElement("h1",null,g.a.createElement(y.a,{id:"sidebar.Pages"}))},g.a.createElement(p.a,{onClick:function(){return e.onToggleModal("addPageState")},size:"large",icon:g.a.createElement(U.a,null),type:"primary"}),g.a.createElement(b.a,{type:"vertical"}),g.a.createElement(v.a,{count:this.state.selectedRowKeys.length},g.a.createElement(S.a,{visible:o,onVisibleChange:this.handleVisibleChange,title:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u061f",onConfirm:function(){return e.confirm(n)},onCancel:this.cancel,okText:"\u0646\u0639\u0645",cancelText:"\u0644\u0627"},g.a.createElement(p.a,{size:"large",icon:g.a.createElement(V.a,null),disabled:!l,type:"danger",loading:a}))),g.a.createElement(M,{open:this.state.addPageState,onAddPage:this.onAddPage,onToggleModal:this.onToggleModal}),g.a.createElement(D,{open:this.state.editPageState,page:r,onSavePage:this.onSavePage,onToggleModal:this.onToggleModal}),g.a.createElement(C.a,{rowKey:function(e){return e.id},dir:"rtl",bordered:!0,className:"gx-table-responsive",rowSelection:c,columns:i,dataSource:this.props.pages}))))}}]),a}(g.a.Component);t.default=Object(J.c)((function(e){return{pages:e.pages}}),{fetchPages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pagination:{page:1,perPage:10},sort:{field:"name",order:"ASC"},filter:{}};return function(t){return Object(q.a)("GET_LIST","pages",e).then((function(e){t(B(e))})).catch((function(e){t({type:z.a,payload:e.message}),console.log("Error****:",e.message)}))}},CreatePage:function(e){return function(t){return Object(q.a)("CREATE","pages/create",e)}},UpdatePage:function(e){return function(t){return Object(q.a)("UPDATE","pages/update",e)}},DeletePages:function(e){return function(t){return Object(q.a)("DELETE_MANY","pages/delete",e)}}})(L)}}]);
//# sourceMappingURL=7.b4b10de2.chunk.js.map