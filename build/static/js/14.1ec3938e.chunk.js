(this.webpackJsonpchrahlifront=this.webpackJsonpchrahlifront||[]).push([[14],{698:function(e,t,a){"use strict";a.r(t);var n=a(41),o=a.n(n),c=a(62),s=a(9),r=a(16),i=a(19),l=a(20),d=a(31),g=a(1),u=a(0),j=a.n(u),b=a(227),h=a(78),p=a(104),m=a(65),x=a(422),f=a(420),O=a(696),v=a(527),S=a(691),C=a(15),P=a(424),w=a(426),y=a(430),N=a(416),k=a(495),T=a(461),M=a(522),R=a.n(M),K=(a(484),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={name:"",slug:"",editorState:""},e.onEditorStateChange=function(t){e.setState({editorState:t})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.onAddPage,n=t.onToggleModal,o=t.open,c=this.state,s=c.name,r=c.editorState,i=c.slug;return Object(g.jsx)(P.a,{width:"80%",okText:Object(g.jsx)(y.a,{}),cancelText:Object(g.jsx)(C.a,{id:"modal.cancelSave"}),title:Object(g.jsx)(C.a,{id:"page.addPage"}),toggle:n,visible:o,closable:!1,onOk:function(){""!==s&&(n("addPageState"),a({name:s,slug:i,content:R()(Object(T.convertToRaw)(r.getCurrentContent()))}),e.setState({name:"",slug:""}))},onCancel:function(){n("addPageState"),e.setState({name:"",slug:""})},children:Object(g.jsx)("div",{className:"gx-modal-box-row",children:Object(g.jsxs)("div",{className:"gx-modal-box-form-item",children:[Object(g.jsx)("div",{className:"gx-form-group",children:Object(g.jsx)(N.a,{id:"columns.name",defaultMessage:"name",children:function(t){return Object(g.jsx)(w.a,{required:!0,value:s,placeholder:t,onChange:function(t){return e.setState({name:t.target.value})},margin:"none"})}})}),Object(g.jsx)("div",{className:"gx-form-group",children:Object(g.jsx)(w.a,{required:!0,value:i,placeholder:"slug",onChange:function(t){return e.setState({slug:t.target.value})},margin:"none"})}),Object(g.jsx)("div",{className:"gx-form-group",children:Object(g.jsx)(k.Editor,{textAlignment:"right",toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:this.onEditorStateChange})})]})})})}}]),a}(j.a.Component)),E=a(7),A=a(683),q=a.n(A),D=function(e){var t=e.onSavePage,a=e.onToggleModal,n=e.open,o=e.id,c=e.name,s=e.content,r=e.page,i=e.count,l=Object(u.useState)(null),d=Object(E.a)(l,2),j=d[0],b=d[1],h=Object(u.useState)(null),p=Object(E.a)(h,2),m=p[0],x=p[1],f=Object(u.useState)(""),O=Object(E.a)(f,2),v=O[0],S=O[1];return Object(u.useEffect)((function(){if(s){var e=q()(s),t=e.contentBlocks,a=e.entityMap,n=T.ContentState.createFromBlockArray(t,a),o=T.EditorState.createWithContent(n);b(o),x(n),S(c)}}),[s,c,r,i]),Object(g.jsx)(P.a,{width:"80%",okText:Object(g.jsx)(y.a,{}),cancelText:Object(g.jsx)(C.a,{id:"modal.cancelSave"}),title:Object(g.jsx)(C.a,{id:"page.savePage"}),toggle:a,visible:n,closable:!1,onOk:function(){if(console.log(o),""!==v){a("editPageState");var e=s;j&&(e=R()(Object(T.convertToRaw)(j.getCurrentContent()))),t({id:o,name:v,content:e}),S(c),x(null),b(null)}},onCancel:function(){a("editPageState"),S(c),x(null),b(null)},children:Object(g.jsx)("div",{className:"gx-modal-box-row",children:Object(g.jsxs)("div",{className:"gx-modal-box-form-item",children:[Object(g.jsx)("div",{className:"gx-form-group",children:Object(g.jsx)(N.a,{id:"columns.name",defaultMessage:"name",children:function(e){return Object(g.jsx)(w.a,{required:!0,placeholder:e,onChange:function(e){return S(e.target.value)},value:v,margin:"none"})}})}),Object(g.jsx)("div",{className:"gx-form-group",children:Object(g.jsx)(k.Editor,{editorState:j,contentState:m,textAlignment:"right",toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:function(e){b(e)}})})]})})})},I=a(688),V=a(689),z=a(529),B=a(190),J=a(12),U=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={selectedRowKeys:[],loading:!1,page:{},id:"",name:"",count:0,content:"",addPageState:!1,editPageState:!1,visible:!1},e.onToggleModal=function(t){e.setState((function(e){return Object(s.a)({},t,!e[t])}))},e.onEditPage=function(t){e.setState({id:t.id,name:t.name,content:t.content,page:t,count:e.state.count+1},(function(){e.onToggleModal("editPageState")}))},e.onAddPage=function(){var t=Object(c.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.CreatePage({data:a});case 2:return b.b.success("\u062a\u0645\u062a \u0627\u0644\u0639\u0645\u0644\u064a\u0629 \u0628\u0646\u062c\u0627\u062d"),t.next=5,e.props.fetchPages();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSavePage=function(){var t=Object(c.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a),t.next=3,e.props.UpdatePage({data:a});case 3:return b.b.success("\u062a\u0645\u062a \u0627\u0644\u0639\u0645\u0644\u064a\u0629 \u0628\u0646\u062c\u0627\u062d"),t.next=6,e.props.fetchPages();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSelectChange=function(t){console.log("selectedRowKeys changed: ",t),e.setState({selectedRowKeys:t})},e.confirm=function(t){e.setState({loading:!0}),e.props.DeletePages({ids:t}).then(Object(c.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.fetchPages();case 2:b.b.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0635\u0641\u062d\u0629"),e.setState({loading:!1,selectedRowKeys:[]});case 4:case"end":return t.stop()}}),t)})))).catch((function(){b.b.error("\u0639\u0637\u0644 \u0623\u062b\u0646\u0627\u0621 \u0627\u0644\u0639\u0645\u0644\u064a\u0629"),e.setState({loading:!1,selectedRowKeys:[]})}))},e.handleVisibleChange=function(t){e.state.selectedRowKeys.length>0&&e.setState({visible:t})},e.cancel=function(t){e.setState({selectedRowKeys:[]})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchPages()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.selectedRowKeys,o=t.name,c=t.content,s=t.id,r=t.page,i=t.visible,l=t.count,d={selectedRowKeys:n,onChange:this.onSelectChange},u=n.length>0,j=[{title:Object(g.jsx)(C.a,{id:"columns.name"}),dataIndex:"name",align:"right"},{title:"slug",dataIndex:"slug",align:"right"},{title:Object(g.jsx)(C.a,{id:"columns.operation"}),dataIndex:"",key:"x",render:function(t){return Object(g.jsx)("span",{children:Object(g.jsx)(h.a,{onClick:function(){return e.onEditPage(t)},type:"primary",icon:Object(g.jsx)(I.a,{}),children:" \u062a\u0639\u062f\u064a\u0644 "})})},align:"right"}];return Object(g.jsx)(p.a,{children:Object(g.jsx)(m.a,{span:24,children:Object(g.jsxs)(x.a,{title:Object(g.jsx)("h1",{children:Object(g.jsx)(C.a,{id:"sidebar.Pages"})}),children:[Object(g.jsx)(h.a,{onClick:function(){return e.onToggleModal("addPageState")},size:"large",icon:Object(g.jsx)(V.a,{}),type:"primary"}),Object(g.jsx)(f.a,{type:"vertical"}),Object(g.jsx)(O.a,{count:this.state.selectedRowKeys.length,children:Object(g.jsx)(v.a,{visible:i,onVisibleChange:this.handleVisibleChange,title:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u061f",onConfirm:function(){return e.confirm(n)},onCancel:this.cancel,okText:"\u0646\u0639\u0645",cancelText:"\u0644\u0627",children:Object(g.jsx)(h.a,{size:"large",icon:Object(g.jsx)(z.a,{}),disabled:!u,type:"danger",loading:a})})}),Object(g.jsx)(K,{open:this.state.addPageState,onAddPage:this.onAddPage,onToggleModal:this.onToggleModal}),Object(g.jsx)(D,{count:l,open:this.state.editPageState,page:r,id:s,name:o,content:c,onSavePage:this.onSavePage,onToggleModal:this.onToggleModal}),Object(g.jsx)(S.a,{locale:{emptyText:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0623\u064a \u0628\u064a\u0627\u0646\u0627\u062a"},rowKey:function(e){return e.id},dir:"rtl",bordered:!0,className:"gx-table-responsive",rowSelection:d,columns:j,dataSource:this.props.pages})]})})})}}]),a}(j.a.Component);t.default=Object(J.c)((function(e){return{pages:e.pages}}),{fetchPages:B.d,CreatePage:B.a,UpdatePage:B.c,DeletePages:B.b})(U)}}]);
//# sourceMappingURL=14.1ec3938e.chunk.js.map